<section class="namingConventions">
  <h2>What were the primary considerations when designing the database?</h2>

   <p>When designing the database, we tried to balance the following objectives:</p>
   <ul class='regularDisplay'>
     <li>Present data exactly as it exists in ClinicalTrials.gov.</li>
     <li>Make the information as easy to understand & analyze as possible.</li>
     <li>Use consistent names and database structures throughout the database. Make it predictable; minimize uncertainty.</li>
     <li>Provide value-added attributes, identify them as such, and keep them separate from the raw ClinicalTrials.gov content. (The <i>Calculated_Values</i> table contains data elements that were derived from existing data.)</li>
   </ul>
   <p>It was impossible to strictly adhere to every objective for each design decision; often compromises were required. For example, the study start date has historically been provided by ClinicalTrials.gov as a month/year. (NLM reported that as of January 19, 2017, some studies will include full dates: mm/dd/yy.) To honor the rule that we display exactly what ClinicalTrials.gov provides, we need to store dates as strings since the day value is missing (without it, the value cannot convert to a proper date). However, string-formatted dates are of limited utility in an analytic database; they can't be used to calculate study duration, identify studies registered within specific time periods, etc. We had long discussions and considered various alternatives to handle these conflicting objectves. When ClinicalTrials.gov reported that going forward, some studies will include full dates, we decided the best compromise would be to provide 2 columns in the Studies table for every date: 1) a string-type that displays exactly what was received & 2) a date-type that can be easily used for date calculations. If the date received has only month/year, it is assigned the first day of the month so it can be converted to a date. For example, a study with start date June, 2014 will have <i>June, 2014</i> in the <b>start_month_year</b> column and <i>06/01/14</i> in the <b>start_date</b> column.</li>

   <p>Below are the fundamental rules/conventions used to design the database.</p>

   <h4>Naming Conventions</h4>
   <ul class='regularDisplay'>
     <li>Table names are all plural. (ie. <i>studies, facilities, interventions,</i> etc.)</li>
     <li>Column names are all singular. (ie. <i>description, phase, name</i>, etc.)</li>
     <li>Table/column names derived from multiple words are delimited with underscores. (ie. <i>mesh_term, first_received_date, number_of_groups</i>, etc.)</li>
     <li>Case (upper vs lower) is not relevant since PostgreSQL ignores case. <i>Studies</i>, <i>STUDIES</i> and <i>studies</i> all represent the same table and can be used interchangably.</li>
     <li>Information entered during registration that's related to the study design is stored in tables prefixed with <i>Design_</i> to distinguish this info from the results. For example, <i>Design_Groups</i> contains registry information about anticipated participant groups, whereas the <i>Result_Groups</i> table contains information entered when the study completed about the actual participant groups. <i>Design_Outcomes</i> contains information about the outcomes to be measured and <i>Outcomes</i> contains info about the actual outcomes reported when the study completed.</li>
       <li>Columns that end with <i>_id</i> are foreign keys to the table identified in front of <i>_id</i>. Each foreign key links to the <i>id</i> column of the parent table. (Child_Table.&lt;parent_table&gt;_id = Parent_Table.id) For example, a row in <i>Facility_Contacts</i> links to it’s Facility through the <i>facility_id</i> column. <i>Facility_Contacts.facility_id = Facility.id</i>).</li>
       <li>Wherever possible, tables & columns are given fully qualified names; abbreviations are avoided. (ie. <i>description</i> rather than <i>desc</i>, <i>category</i> rather than <i>ctgry</i>)</li>
     <li>Unnecssary and duplicate verbiage is avoided. For example: <i>Studies.source</i> instead of <i>Studies.study_source</i></li>
  </ul>
   <h4>Structure Conventions</h4>
   <ul class='regularDisplay'>
     <li>Every table has an <i>nct_id</i> column to link rows to its related row in the <i>Studies</i> table. All study-related data can be linked directly to the <i>Studies</i> table via the <i>nct_id.</i> (Note: The schema diagram does not display all relationships to <i>Studies</i> to avoid appearing complex and confusing.  Relationships to the <i>Studies</i> table can be assumed.)</li>
     <li>Every table has the primary key: <i>id</i>. (<i>Studies</i> is the one exception since it's primary key is the unique study identifier assigned by ClinicalTrials.gov: <i>nct_id</i>.)</li>
     <li>Columns that end with <i>_date</i> contain date-type values.</li>
     <li>Columns that contain month/year dates are saved as strings in a column with a <i>_month_year</i> suffix. A date-type estimate of the value (using the 1st of the month as the 'day') is stored in an adjacent column with the <i>_date</i> suffix. (This applies to date values in the <i>Studies</i> table.)</li>
     <li>Derived/calculated value are stored in the <i>Calculated_Values</i> table.</i>
   </ul>

   <h2>How are arms/groups identified?</h2>
   <p>Considerable thought went into how to present arm and group information to facilitate analysis by simplifying naming and data structures while retaining data fidelity.

   NLM defines them as:</p>
   <ul class='regularDisplay'>
     <li><i>Arm:</i> A pre-specified group or subgroup of participant(s) in a clinical trial assigned to receive specific intervention(s) (or no intervention) according to a protocol.</li>
     <li><i>Group:</i> The predefined participant groups (cohorts) to be studied, corresponding to Number of Groups specified under Study Design (for single-group studies.</li>
   </ul>

   <p>In short, observational studies use the term ‘groups’; interventional studies use ‘arms’, though for the purpose of analysis, they both refer to the same thing. Because 'group' is more intuitive to the general public, we only use the term 'groups' throughout the database.</p>

   <h4>Participant Groups: Registry vs Results</h4>
   <p>When a study is registered in ClinicalTrials.gov, information about how the study design defines partipant groups. In AACT, this information is stored in the <i>Design_Groups</i> table, while info about actual groups entered after the study has completed is stored in the <i>Result_Groups</i> table. (AACT has not attempted to link data between these 2 tables.)</p>

   <p>Result information, for the most part, is organized in ClinicalTrials.gov by participant group. <i>Result_Contacts</i> & <i>Result_Agreements</i> are the only result tables not associated with groups. This section describes how AACT has structured group-related results data.</p>

   <p>AACT provides four general categories of result information:</p>

     <ul class='regularDisplay'>
       <li>Participant Flow (Milestones & Drop/Withdrawals)</li>
       <li>Baselines</li>
       <li>Outcomes</li>
       <li>Reported Events</li>
    </ul>

    <p>The <i>Result_Groups</i> table represents an aggregate list of all groups associated with these result types. All result tables (<i>Outcomes, Outcome_Counts, Baseline_Measures, Reported_Events</i>, etc.) relate to <i>Result_Groups</i> via the foreign key <i>result_group_id</i>.</p>
    <p>For example, <i>Outcomes.result_group_id = Result_Groups.id</i>.</p>

    <p>ClinicalTrials.gov assigns an identifier to each group/result that is unique within the study. The identifier includes a leading character that represents the type of result (B for Baseline, O for Outcomes, R for Reported Event, and P for Participant Flow (Milestones & Drop/Withdrawals) followed by a number that uniquely identifies the group in that context. To illustrate... Study NCT001 had 2 groups: experimental & control, and reported multiple baseline measures, outcome measures, reported events and milestone/drop-withdrawals for each group. The following table illustrates how the <i>Result_Groups</i> table organizes the group information received from ClinicalTrials.gov in this case:</p>
     <table id='resultGroup' class='regularDisplay'>
       <tr>
         <th class='resultGroup'>id</th>
         <th class='resultGroup'>nct_id</th>
         <th class='resultGroup'>result_type</th>
         <th class='resultGroup'>ctgov_group_code</th>
         <th class='resultGroup'>group title</th>
         <th class='resultGroup'>explanation</th>
       </tr>
       <tr class='even'>
         <td class='schemaID'>1</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Baseline</td>
         <td class='schemaID'>B1</td>
         <td>Experimental Group</td>
         <td>All Baseline_Measures associated with this study's experimental group link to this row.</th>
       </tr>
       <tr class='even'>
         <td class='schemaID'>2</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Baseline</td>
         <td class='schemaID'>B2</td>
         <td>Control Group</td>
         <td>All Baseline_Measures associated with this study's control group link to this row.</td>
       </tr>
       <tr class='odd'>
         <td class='schemaID'>3</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Outcome</td>
         <td class='schemaID'>O2</td>
         <td>Experimental Group</td>
         <td>All Outcome_Measures associated with this study's experimental group link to this row.</td>
       </tr>
       <tr class='odd'>
         <td class='schemaID'>4</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Outcome</td>
         <td class='schemaID'>O1</td>
         <td>Control Group</td>
         <td>All Outcome_Measures associated with this study's control group link to this row.</td>
       </tr>
       <tr class='even'>
         <td class='schemaID'>5</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Reported Event</td>
         <td class='schemaID'>E1</td>
         <td>Experimental Group</td>
         <td>All Reported_Events associated with this study's experimental group link to this row.</td>
       </tr>
       <tr class='even'>
         <td class='schemaID'>6</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Reported Event</td>
         <td class='schemaID'>E2</td>
         <td>Control Group</td>
         <td>All Reported_Events associated with this study's control group link to this row.</td>
       </tr>
       <tr class='odd'>
         <td class='schemaID'>7</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Participant Flow</td>
         <td class='schemaID'>P1</td>
         <td>Experimental Group</td>
         <td>All Milestones & Drop_Withdrawals associated with this study's experimental group link to this row.</td>
       </tr>
       <tr class='odd'>
         <td class='schemaID'>8</td>
         <td class='schemaID'>NCT001</td>
         <td class='schemaID'>Participant Flow</td>
         <td class='schemaID'>P2</td>
         <td>Control Group</td>
         <td>All Milestones & Drop_Withdrawals associated with this study's studies control group link to this row.</td>
       </tr>
     </table>

     <p>Notice that the integer in the code provided by ClinicalTrials.gov often represents the same group across the different result types, but this is not always the case. In the example above, B1, E1 & P1 all represent the 'experimental group', however for Outcomes - O1 represents the control group. (We'd hoped to use a single row in <i>Result_Groups</i> to uniquely represent a participant group in the study and link all related results data (from the various tables) to that one row, however this was not possible. One group will typically be represented multiple times in the <i>Result_Groups</i> table: once for each type of result data.</p>

   <h2>Information about dates</h2>
   <p>ClinicalTrials.gov has historically provided the month/year (without day) for several date values including start date, completion date, primary completion date and verification date. Because the 'day' was not provided, AACT stored these dates in the <i>Studies</i> table as character-type rather than date-type. Character-type dates are of limited utility in an analytic database because they can't be used to perform standard date calculations such as determining study duration or identifying studies registered before/after a certain date.

NLM recently reported that studies will start providing full date values (mm/dd/yy) for these date elements, however this only applies to new studies; pre-existing studies will continue to have only month/year date values.

We had long discussions and considered various alternatives to handle dates given this issue. We decided to provide 2 columns in the <i>Studies</i> table for each date element: 1) a character-type column that displays the value exactly as it was received from ClinicalTrials.gov & 2) a date-type column that can be used for date calculations. If the date received from ClinicalTrials.gov has only month/year, it is assigned the first day of the month so that it can be converted to a date. For example, a study with start date June, 2014 will have <i>June, 2014</i> in the <b>start_month_year</b> column and <i>06/01/14</i> in the <b>start_date</b> column.
    <p>

    <h2>Information about trial sites (Facilities and Countries)</h2>
    <p> Information about organizations where the study is/was conducted (aka. facilities, trial sites) is stored in the <i>Facilities</i> table. This represents a snapshot of the facility information that was included in the study record on the date that information was downloaded from ClinicalTrials.gov.</p>
    <p>AACT includes a <i>Countries</i> table, which contains one record per unique country per study. The <i>Countries</i> table includes countries currently & previously associated with the study. The <i>removed</i> column identifies those countries that are no longer associated with the study. NLM uses facilities information to create a list of unique countries associated with the study. In some cases, ClinicalTrials.gov data submitters subsequently remove facilities that were entered when the study was registered. Naturally these will not appear in AACT's <i>Facilities</i> table. If all of a country’s facilities have been removed from a study, NLM flags the country as ‘Removed’ which appears in AACT as <i>Countries.removed</i> = true.
    </ul>

    <p>The reasons facilities are removed are varied and unknown. A site may have been removed because it was never initiated or because it was entered with incorrect information. The recommended action for sites that have completed or have terminated enrollment is to change the enrollment status to “Completed” or “Terminated”; however, such sites are sometimes deleted from the study record by the responsible party. Data analysts may consider using Countries where <i>removed</i> is set to true to supplement the information about trial locations that is contained in <i>Facilities</i>, particularly for studies that have completed enrollment and have no records in <i>Facilities</i>.</p>

    <p>Users who are interested in identifying countries where participants are being/were enrolled may use either the <i>Facilities</i> or <i>Countries</i> (where <i>Countries.removed</i> is not true) with equivalent results.</p>

    <h2>MeSH terms in Browse_Conditions and Browse_Interventions</h2>
    <p>When data submitters provide information to ClinicalTrials.gov about a study, they’re encouraged to use Medical Subject Heading (<a target='_blank' href='https://www.nlm.nih.gov/mesh/meshhome.html'>MeSH</a>) terminology for interventions, conditions, and keywords. The <i>Browse_Conditions</i> and <i>Browse_Interventions</i> tables contain MeSH terms generated by an algorithm run by NLM. The NLM algorithm is re-run nightly on all studies in the ClinicalTrials.gov database, and sources the most up-to-date information in the study record, the latest version of the algorithm, and the version of the MeSH thesaurus in use at that time.</p>

    <h2>“Delayed Results” data elements are available in AACT</h2>

    <p>A responsible party of an applicable clinical trial may delay the deadline for submitting results information to ClinicalTrials.gov for up to two additional years if one of the following two certification conditions applies to the trial:</p>

    <ul class='regularDisplay'>
      <li>Initial approval: trial completed before a drug, biologic or device studied in the trial is initially approved, licensed or cleared by the FDA for any use.</li>
      <li>New use: the manufacturer of a drug, biologic or device is the sponsor of the trial and has filed or will file within one year, an application seeking FDA approval, licensure, or clearance of the new use studied in the trial. A responsible party may also request, for good cause, an extension of the deadline for the submission of results.</li>
    </ul>

    <p>Studies for which a certification or extension request have been submitted include the date of the first certification or extension request in the data element: <i>Studies.received_results_disposit_date</i>.</p>

    <p>In general, the content that is contained in the AACT database preserves the content in the source XML files that are downloaded from ClinicalTrials.gov.</p>

</section>
